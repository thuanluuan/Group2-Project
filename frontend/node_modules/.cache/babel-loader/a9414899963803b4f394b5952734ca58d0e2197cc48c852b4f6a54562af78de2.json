{"ast":null,"code":"import _objectSpread from\"D:/New folder/Group2-Project-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _process$env$REACT_AP;import{useState}from\"react\";import{useDispatch,useSelector}from'react-redux';import{loginThunk,selectAuth}from'../store/authSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=((_process$env$REACT_AP=process.env.REACT_APP_API_URL)===null||_process$env$REACT_AP===void 0?void 0:_process$env$REACT_AP.replace(/\\/$/,\"\"))||\"\";export default function Login(_ref){let{onLoggedIn,onForgot}=_ref;const[form,setForm]=useState({email:\"\",password:\"\"});const dispatch=useDispatch();const{status}=useSelector(selectAuth);const loading=status==='loading';const[blockInfo,setBlockInfo]=useState(null);const change=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const submit=async e=>{var _action$payload,_action$payload2,_action$payload2$data;e.preventDefault();setBlockInfo(null);const action=await dispatch(loginThunk({email:form.email,password:form.password}));if(loginThunk.fulfilled.match(action)){onLoggedIn===null||onLoggedIn===void 0?void 0:onLoggedIn(action.payload.user);}else if(((_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.status)===429&&(_action$payload2=action.payload)!==null&&_action$payload2!==void 0&&(_action$payload2$data=_action$payload2.data)!==null&&_action$payload2$data!==void 0&&_action$payload2$data.blocked){setBlockInfo({message:action.payload.data.message,remainingMinutes:action.payload.data.remainingMinutes,adminEmail:action.payload.data.adminContactEmail});}else{var _action$payload3;alert(((_action$payload3=action.payload)===null||_action$payload3===void 0?void 0:_action$payload3.message)||'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i');}};return/*#__PURE__*/_jsxs(\"div\",{children:[blockInfo&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff3cd',border:'2px solid #ffc107',borderRadius:'6px',padding:'16px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'#856404',marginBottom:'12px',fontSize:'16px'},children:\"\\uD83D\\uDD12 T\\xE0i kho\\u1EA3n b\\u1ECB kh\\xF3a\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#856404',marginBottom:'12px'},children:blockInfo.message}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'12px',borderRadius:'4px',marginTop:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',color:'#dc3545',marginBottom:'8px'},children:\"\\uD83D\\uDCE7 Li\\xEAn h\\u1EC7 Admin \\u0111\\u1EC3 m\\u1EDF kh\\xF3a:\"}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(blockInfo.adminEmail,\"?subject=Y\\xEAu c\\u1EA7u m\\u1EDF kh\\xF3a t\\xE0i kho\\u1EA3n&body=Xin ch\\xE0o Admin,%0D%0A%0D%0AT\\xE0i kho\\u1EA3n c\\u1EE7a t\\xF4i (\").concat(form.email,\") \\u0111\\xE3 b\\u1ECB kh\\xF3a do \\u0111\\u0103ng nh\\u1EADp sai qu\\xE1 nhi\\u1EC1u l\\u1EA7n.%0D%0A%0D%0AVui l\\xF2ng h\\u1ED7 tr\\u1EE3 m\\u1EDF kh\\xF3a t\\xE0i kho\\u1EA3n.%0D%0A%0D%0AXin c\\u1EA3m \\u01A1n!\"),style:{color:'#007bff',textDecoration:'none',fontWeight:'500',fontSize:'16px'},children:blockInfo.adminEmail})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',fontSize:'14px',color:'#666'},children:[\"\\u23F1\\uFE0F Ho\\u1EB7c \\u0111\\u1EE3i \",blockInfo.remainingMinutes,\" ph\\xFAt \\u0111\\u1EC3 th\\u1EED l\\u1EA1i\"]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"email\",type:\"email\",value:form.email,onChange:change,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"M\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"password\",type:\"password\",value:form.password,onChange:change,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:loading,children:loading?\"ƒêang ƒëƒÉng nh·∫≠p...\":\"ƒêƒÉng nh·∫≠p\"})})]})]});}","map":{"version":3,"names":["useState","useDispatch","useSelector","loginThunk","selectAuth","jsx","_jsx","jsxs","_jsxs","API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_URL","replace","Login","_ref","onLoggedIn","onForgot","form","setForm","email","password","dispatch","status","loading","blockInfo","setBlockInfo","change","e","_objectSpread","target","name","value","submit","_action$payload","_action$payload2","_action$payload2$data","preventDefault","action","fulfilled","match","payload","user","data","blocked","message","remainingMinutes","adminEmail","adminContactEmail","_action$payload3","alert","children","style","background","border","borderRadius","padding","marginBottom","fontWeight","color","fontSize","marginTop","href","concat","textDecoration","onSubmit","className","type","onChange","required","disabled"],"sources":["D:/New folder/Group2-Project-main/frontend/src/components/Login.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginThunk, selectAuth } from '../store/authSlice';\n\nconst API_BASE = process.env.REACT_APP_API_URL?.replace(/\\/$/, \"\") || \"\";\n\nexport default function Login({ onLoggedIn, onForgot }) {\n  const [form, setForm] = useState({ email: \"\", password: \"\" });\n  const dispatch = useDispatch();\n  const { status } = useSelector(selectAuth);\n  const loading = status === 'loading';\n  const [blockInfo, setBlockInfo] = useState(null);\n\n  const change = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const submit = async (e) => {\n    e.preventDefault();\n    setBlockInfo(null);\n    const action = await dispatch(loginThunk({ email: form.email, password: form.password }));\n    if (loginThunk.fulfilled.match(action)) {\n      onLoggedIn?.(action.payload.user);\n    } else if (action.payload?.status === 429 && action.payload?.data?.blocked) {\n      setBlockInfo({\n        message: action.payload.data.message,\n        remainingMinutes: action.payload.data.remainingMinutes,\n        adminEmail: action.payload.data.adminContactEmail,\n      });\n    } else {\n      alert(action.payload?.message || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i');\n    }\n  };\n\n  return (\n    <div>\n      {blockInfo && (\n        <div style={{\n          background: '#fff3cd',\n          border: '2px solid #ffc107',\n          borderRadius: '6px',\n          padding: '16px',\n          marginBottom: '20px',\n        }}>\n          <div style={{ \n            fontWeight: 'bold', \n            color: '#856404', \n            marginBottom: '12px',\n            fontSize: '16px',\n          }}>\n            üîí T√†i kho·∫£n b·ªã kh√≥a\n          </div>\n          <div style={{ color: '#856404', marginBottom: '12px' }}>\n            {blockInfo.message}\n          </div>\n          <div style={{\n            background: 'white',\n            padding: '12px',\n            borderRadius: '4px',\n            marginTop: '12px',\n          }}>\n            <div style={{ \n              fontWeight: '600', \n              color: '#dc3545',\n              marginBottom: '8px',\n            }}>\n              üìß Li√™n h·ªá Admin ƒë·ªÉ m·ªü kh√≥a:\n            </div>\n            <a \n              href={`mailto:${blockInfo.adminEmail}?subject=Y√™u c·∫ßu m·ªü kh√≥a t√†i kho·∫£n&body=Xin ch√†o Admin,%0D%0A%0D%0AT√†i kho·∫£n c·ªßa t√¥i (${form.email}) ƒë√£ b·ªã kh√≥a do ƒëƒÉng nh·∫≠p sai qu√° nhi·ªÅu l·∫ßn.%0D%0A%0D%0AVui l√≤ng h·ªó tr·ª£ m·ªü kh√≥a t√†i kho·∫£n.%0D%0A%0D%0AXin c·∫£m ∆°n!`}\n              style={{\n                color: '#007bff',\n                textDecoration: 'none',\n                fontWeight: '500',\n                fontSize: '16px',\n              }}\n            >\n              {blockInfo.adminEmail}\n            </a>\n          </div>\n          <div style={{ \n            marginTop: '12px',\n            fontSize: '14px',\n            color: '#666',\n          }}>\n            ‚è±Ô∏è Ho·∫∑c ƒë·ª£i {blockInfo.remainingMinutes} ph√∫t ƒë·ªÉ th·ª≠ l·∫°i\n          </div>\n        </div>\n      )}\n      \n      <form onSubmit={submit} className=\"form\">\n        <div className=\"field\">\n          <label className=\"label\">Email</label>\n          <input className=\"input\" name=\"email\" type=\"email\" value={form.email} onChange={change} required />\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">M·∫≠t kh·∫©u</label>\n          <input className=\"input\" name=\"password\" type=\"password\" value={form.password} onChange={change} required />\n        </div>\n\n        <div className=\"row\">\n          <button className=\"button\" type=\"submit\" disabled={loading}>{loading ? \"ƒêang ƒëƒÉng nh·∫≠p...\" : \"ƒêƒÉng nh·∫≠p\"}</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}