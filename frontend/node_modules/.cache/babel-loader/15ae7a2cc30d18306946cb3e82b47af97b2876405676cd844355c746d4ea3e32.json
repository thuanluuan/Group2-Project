{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import api from\"../lib/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(_ref){let{onEdit}=_ref;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{let cancelled=false;const load=async()=>{try{const res=await api.get(\"/users\");if(!cancelled)setUsers(res.data||[]);}catch(err){console.error(err);alert(\"Không tải được users\");if(!cancelled)setUsers([]);}finally{if(!cancelled)setLoading(false);}};load();return()=>{cancelled=true;};},[]);const handleDelete=async id=>{if(!window.confirm(\"Bạn có chắc muốn xóa user này?\"))return;try{await api.delete(\"/users/\".concat(id));setUsers(users.filter(user=>user._id!==id));}catch(err){console.error(err);alert(\"Xóa user thất bại\");}};const handleEdit=user=>{onEdit===null||onEdit===void 0?void 0:onEdit(user);};if(loading)return/*#__PURE__*/_jsx(\"p\",{className:\"loading\",children:\"\\u0110ang t\\u1EA3i...\"});if(!users.length)return/*#__PURE__*/_jsx(\"div\",{className:\"empty\",children:\"Ch\\u01B0a c\\xF3 user n\\xE0o. H\\xE3y th\\xEAm m\\u1EDBi \\u1EDF khung b\\xEAn c\\u1EA1nh.\"});return/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:users.map(u=>/*#__PURE__*/_jsxs(\"li\",{className:\"item\",title:\"\".concat(u.name,\" <\").concat(u.email,\">\"),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:600},children:u.name}),/*#__PURE__*/_jsx(\"div\",{className:\"meta\",children:u.email})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"8px\",marginTop:\"8px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(u),className:\"button button--small\",children:\"S\\u1EEDa\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(u._id),className:\"button button--small button--danger\",children:\"X\\xF3a\"})]})]},u._id||\"\".concat(u.name,\"-\").concat(u.email)))});}","map":{"version":3,"names":["useEffect","useState","axios","api","jsx","_jsx","jsxs","_jsxs","UserList","_ref","onEdit","users","setUsers","loading","setLoading","cancelled","load","res","get","data","err","console","error","alert","handleDelete","id","window","confirm","delete","concat","filter","user","_id","handleEdit","className","children","length","map","u","title","name","email","style","fontWeight","display","gap","marginTop","onClick"],"sources":["D:/New folder/Group2-Project-main/frontend/src/components/UserList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nimport api from \"../lib/api\";\n\nexport default function UserList({ onEdit }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    let cancelled = false;\n    const load = async () => {\n      try {\n        const res = await api.get(`/users`);\n        if (!cancelled) setUsers(res.data || []);\n      } catch (err) {\n        console.error(err);\n        alert(\"Không tải được users\");\n        if (!cancelled) setUsers([]);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Bạn có chắc muốn xóa user này?\")) return;\n    try {\n  await api.delete(`/users/${id}`);\n      setUsers(users.filter(user => user._id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Xóa user thất bại\");\n    }\n  };\n\n  const handleEdit = (user) => {\n    onEdit?.(user);\n  };\n\n  if (loading) return <p className=\"loading\">Đang tải...</p>;\n  if (!users.length)\n    return <div className=\"empty\">Chưa có user nào. Hãy thêm mới ở khung bên cạnh.</div>;\n\n  return (\n    <ul className=\"list\">\n      {users.map((u) => (\n        <li key={u._id || `${u.name}-${u.email}`}\n            className=\"item\"\n            title={`${u.name} <${u.email}>`}>\n          <div>\n            <div style={{ fontWeight: 600 }}>{u.name}</div>\n            <div className=\"meta\">{u.email}</div>\n          </div>\n          <div style={{ display: \"flex\", gap: \"8px\", marginTop: \"8px\" }}>\n            <button onClick={() => handleEdit(u)} className=\"button button--small\">Sửa</button>\n            <button onClick={() => handleDelete(u._id)} className=\"button button--small button--danger\">Xóa</button>\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}