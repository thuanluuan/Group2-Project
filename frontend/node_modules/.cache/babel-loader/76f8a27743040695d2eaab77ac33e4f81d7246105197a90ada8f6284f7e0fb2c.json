{"ast":null,"code":"var _jsxFileName = \"D:\\\\CNTT\\\\4\\\\HK1\\\\PTPMNM\\\\Git\\\\TH_Nhom\\\\New folder\\\\frontend\\\\src\\\\components\\\\ProfileForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport api from \"../lib/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProfileForm({\n  initialUser,\n  onSaved,\n  isAdminEditing,\n  userId,\n  focusChangePassword = false,\n  allowSelfChangePassword = false\n}) {\n  _s();\n  const [form, setForm] = useState({\n    name: \"\",\n    dob: \"\",\n    address: \"\",\n    phone: \"\",\n    avatarUrl: \"\",\n    role: \"\"\n  });\n  const [saving, setSaving] = useState(false);\n  const [showExtras, setShowExtras] = useState(false);\n  const [showChangePwd, setShowChangePwd] = useState(allowSelfChangePassword && !!focusChangePassword);\n  const [otpMsg, setOtpMsg] = useState(\"\");\n  const [devOtp, setDevOtp] = useState(\"\");\n  const [pw, setPw] = useState({\n    otp: \"\",\n    newPassword: \"\",\n    confirm: \"\"\n  });\n  const [cpLoading, setCpLoading] = useState(false);\n  const [remaining, setRemaining] = useState(0);\n  const [resending, setResending] = useState(false);\n  const otpIntervalRef = useRef(null);\n  const fileRef = useRef(null);\n  const [uploading, setUploading] = useState(false);\n  useEffect(() => {\n    if (initialUser) {\n      setForm({\n        name: initialUser.name || \"\",\n        dob: initialUser.dob ? new Date(initialUser.dob).toISOString().slice(0, 10) : \"\",\n        address: initialUser.address || \"\",\n        phone: initialUser.phone || \"\",\n        avatarUrl: initialUser.avatarUrl || \"\",\n        role: initialUser.role || \"user\"\n      });\n    }\n  }, [initialUser]);\n  useEffect(() => {\n    if (allowSelfChangePassword && focusChangePassword) setShowChangePwd(true);\n  }, [allowSelfChangePassword, focusChangePassword]);\n  useEffect(() => {\n    return () => {\n      if (otpIntervalRef.current) {\n        clearInterval(otpIntervalRef.current);\n        otpIntervalRef.current = null;\n      }\n    };\n  }, []);\n  const change = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const submit = async e => {\n    e.preventDefault();\n    setSaving(true);\n    try {\n      const payload = {\n        name: form.name\n      };\n      if (form.dob) payload.dob = form.dob;\n      if (showExtras) {\n        payload.address = form.address;\n        payload.phone = form.phone;\n        payload.avatarUrl = form.avatarUrl;\n      }\n      if (isAdminEditing && userId) {\n        // Only admin can change role; include if present\n        if (form.role) payload.role = form.role;\n        // Admin updates another user\n        await api.put(`/users/${userId}`, payload);\n      } else {\n        // Self update\n        await api.put(`/auth/me`, payload);\n      }\n      onSaved === null || onSaved === void 0 ? void 0 : onSaved();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"C·∫≠p nh·∫≠t th·∫•t b·∫°i\");\n    } finally {\n      setSaving(false);\n    }\n  };\n  const sendOtp = async () => {\n    setResending(true);\n    setOtpMsg(\"\");\n    setDevOtp(\"\");\n    try {\n      var _res$data;\n      const res = await api.post('/auth/me/forgot-password');\n      setOtpMsg('ƒê√£ g·ª≠i OTP ƒë·∫øn email c·ªßa b·∫°n (hi·ªáu l·ª±c 2 ph√∫t).');\n      if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.otp) setDevOtp(String(res.data.otp));\n      setRemaining(120);\n      if (otpIntervalRef.current) {\n        clearInterval(otpIntervalRef.current);\n      }\n      otpIntervalRef.current = setInterval(() => {\n        setRemaining(s => {\n          if (s <= 1) {\n            if (otpIntervalRef.current) {\n              clearInterval(otpIntervalRef.current);\n              otpIntervalRef.current = null;\n            }\n            return 0;\n          }\n          return s - 1;\n        });\n      }, 1000);\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setOtpMsg((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Kh√¥ng g·ª≠i ƒë∆∞·ª£c OTP');\n    } finally {\n      setResending(false);\n    }\n  };\n  const changePassword = async e => {\n    e.preventDefault();\n    if (!pw.newPassword || pw.newPassword.length < 6) {\n      setOtpMsg('M·∫≠t kh·∫©u m·ªõi t·ªëi thi·ªÉu 6 k√Ω t·ª±');\n      return;\n    }\n    if (pw.newPassword !== pw.confirm) {\n      setOtpMsg('X√°c nh·∫≠n m·∫≠t kh·∫©u kh√¥ng kh·ªõp');\n      return;\n    }\n    setCpLoading(true);\n    setOtpMsg(\"\");\n    try {\n      await api.post('/auth/me/reset-password', {\n        otp: pw.otp,\n        newPassword: pw.newPassword\n      });\n      setOtpMsg('ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng');\n      setPw({\n        otp: \"\",\n        newPassword: \"\",\n        confirm: \"\"\n      });\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      setOtpMsg((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'ƒê·ªïi m·∫≠t kh·∫©u th·∫•t b·∫°i');\n    } finally {\n      setCpLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submit,\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"label\",\n        children: \"H\\u1ECD t\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        name: \"name\",\n        value: form.name,\n        onChange: change,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), isAdminEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"label\",\n        children: \"Ph\\xE2n quy\\u1EC1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"input\",\n        name: \"role\",\n        value: form.role || 'user',\n        onChange: change,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"user\",\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"moderator\",\n          children: \"Moderator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"admin\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty\",\n        style: {\n          marginTop: 6,\n          fontSize: 12,\n          opacity: 0.8\n        },\n        children: \"Ch\\u1EC9 Admin m\\u1EDBi c\\xF3 quy\\u1EC1n ph\\xE2n quy\\u1EC1n. H\\u1EC7 th\\u1ED1ng ch\\u1EC9 cho ph\\xE9p duy nh\\u1EA5t 1 t\\xE0i kho\\u1EA3n Admin.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"label\",\n        children: \"Ng\\xE0y sinh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        name: \"dob\",\n        type: \"date\",\n        value: form.dob,\n        onChange: change,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button button--ghost\",\n        type: \"button\",\n        onClick: () => setShowExtras(s => !s),\n        children: showExtras ? '·∫®n b·ªï sung' : 'B·ªï sung th√¥ng tin'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), showExtras && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: \"\\u1EA2nh c\\xE1 nh\\xE2n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 12,\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: 68,\n              height: 68,\n              borderRadius: 8,\n              overflow: 'hidden',\n              background: '#1b2230',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            children: form.avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: form.avatarUrl,\n              alt: \"avatar\",\n              style: {\n                width: '100%',\n                height: '100%',\n                objectFit: 'cover'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 12,\n                opacity: 0.7\n              },\n              children: \"No image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8,\n              alignItems: 'center',\n              flexWrap: 'wrap'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"button\",\n              onClick: () => {\n                var _fileRef$current;\n                return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();\n              },\n              disabled: uploading,\n              children: uploading ? 'ƒêang t·∫£i...' : 'üì§ T·∫£i ·∫£nh l√™n'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileRef,\n              type: \"file\",\n              accept: \"image/*\",\n              style: {\n                display: 'none'\n              },\n              onChange: async e => {\n                var _e$target$files;\n                const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n                if (!f) return;\n                setUploading(true);\n                try {\n                  var _res$data2, _res$data3;\n                  const fd = new FormData();\n                  fd.append('avatar', f);\n                  const res = await api.post('/upload/avatar', fd, {\n                    headers: {\n                      'Content-Type': 'multipart/form-data'\n                    }\n                  });\n                  const url = (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.fullUrl) || (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.url);\n                  if (url) setForm(prev => ({\n                    ...prev,\n                    avatarUrl: url\n                  }));\n                } catch (err) {\n                  var _err$response2, _err$response2$data;\n                  alert((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'T·∫£i ·∫£nh th·∫•t b·∫°i (ch·ªâ h·ªó tr·ª£ jpeg/png/webp/gif, t·ªëi ƒëa 2MB)');\n                } finally {\n                  setUploading(false);\n                  try {\n                    e.target.value = '';\n                  } catch {}\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              name: \"avatarUrl\",\n              value: form.avatarUrl,\n              onChange: change,\n              placeholder: \"https://...jpg\",\n              style: {\n                minWidth: 260\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty\",\n          style: {\n            marginTop: 6,\n            fontSize: 12,\n            opacity: 0.8\n          },\n          children: \"B\\u1EA1n c\\xF3 th\\u1EC3 d\\xE1n URL \\u1EA3nh ho\\u1EB7c t\\u1EA3i \\u1EA3nh t\\u1EEB m\\xE1y. \\u1EA2nh t\\u1ED1i \\u0111a 2MB.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          name: \"phone\",\n          value: form.phone,\n          onChange: change,\n          placeholder: \"V\\xED d\\u1EE5: 0901234567\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: \"\\u0110\\u1ECBa ch\\u1EC9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          name: \"address\",\n          value: form.address,\n          onChange: change,\n          placeholder: \"S\\u1ED1 nh\\xE0, \\u0111\\u01B0\\u1EDDng, qu\\u1EADn/huy\\u1EC7n, t\\u1EC9nh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), allowSelfChangePassword && !isAdminEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      style: {\n        marginTop: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button button--ghost\",\n        type: \"button\",\n        onClick: () => setShowChangePwd(s => !s),\n        children: showChangePwd ? '·∫®n ƒë·ªïi m·∫≠t kh·∫©u' : 'ƒê·ªïi m·∫≠t kh·∫©u'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this), allowSelfChangePassword && !isAdminEditing && showChangePwd && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        marginTop: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card__header\",\n        children: \"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card__body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          style: {\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"button\",\n            onClick: sendOtp,\n            disabled: resending,\n            children: resending ? 'ƒêang g·ª≠i OTP...' : 'G·ª≠i OTP ƒë·∫øn email c·ªßa t√¥i'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this), remaining > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge\",\n            children: [\"OTP c\\xF2n: \", Math.floor(remaining / 60), \":\", String(remaining % 60).padStart(2, '0')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), devOtp && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty\",\n          style: {\n            marginTop: 8,\n            color: '#0a7'\n          },\n          children: [\"OTP (dev): \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: devOtp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form\",\n          style: {\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"OTP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              value: pw.otp,\n              onChange: e => setPw({\n                ...pw,\n                otp: e.target.value\n              }),\n              placeholder: \"6 ch\\u1EEF s\\u1ED1\",\n              inputMode: \"numeric\",\n              pattern: \"^\\\\\\\\d{6}$\",\n              title: \"Nh\\u1EADp 6 ch\\u1EEF s\\u1ED1\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"password\",\n              value: pw.newPassword,\n              onChange: e => setPw({\n                ...pw,\n                newPassword: e.target.value\n              }),\n              minLength: 6,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label\",\n              children: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"password\",\n              value: pw.confirm,\n              onChange: e => setPw({\n                ...pw,\n                confirm: e.target.value\n              }),\n              minLength: 6,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), pw.newPassword && pw.confirm && pw.newPassword !== pw.confirm && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty\",\n              style: {\n                color: '#c62828',\n                marginTop: 6\n              },\n              children: \"M\\u1EADt kh\\u1EA9u nh\\u1EADp l\\u1EA1i kh\\xF4ng kh\\u1EDBp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              type: \"button\",\n              onClick: changePassword,\n              disabled: cpLoading,\n              children: cpLoading ? 'ƒêang ƒë·ªïi...' : 'ƒê·ªïi m·∫≠t kh·∫©u'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), otpMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty\",\n            style: {\n              marginTop: 8\n            },\n            children: otpMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        disabled: saving,\n        children: saving ? \"ƒêang l∆∞u...\" : \"L∆∞u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n}\n_s(ProfileForm, \"jiAciWIa+a1iE6xCibv9moj79aA=\");\n_c = ProfileForm;\nvar _c;\n$RefreshReg$(_c, \"ProfileForm\");","map":{"version":3,"names":["React","useEffect","useRef","useState","api","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfileForm","initialUser","onSaved","isAdminEditing","userId","focusChangePassword","allowSelfChangePassword","_s","form","setForm","name","dob","address","phone","avatarUrl","role","saving","setSaving","showExtras","setShowExtras","showChangePwd","setShowChangePwd","otpMsg","setOtpMsg","devOtp","setDevOtp","pw","setPw","otp","newPassword","confirm","cpLoading","setCpLoading","remaining","setRemaining","resending","setResending","otpIntervalRef","fileRef","uploading","setUploading","Date","toISOString","slice","current","clearInterval","change","e","target","value","submit","preventDefault","payload","put","err","_err$response","_err$response$data","alert","response","data","message","sendOtp","_res$data","res","post","String","setInterval","s","_e$response","_e$response$data","changePassword","length","_e$response2","_e$response2$data","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","required","style","marginTop","fontSize","opacity","type","onClick","display","alignItems","gap","flexWrap","width","height","borderRadius","overflow","background","justifyContent","src","alt","objectFit","_fileRef$current","click","disabled","ref","accept","_e$target$files","f","files","_res$data2","_res$data3","fd","FormData","append","headers","url","fullUrl","prev","_err$response2","_err$response2$data","placeholder","minWidth","Math","floor","padStart","color","inputMode","pattern","title","minLength","_c","$RefreshReg$"],"sources":["D:/CNTT/4/HK1/PTPMNM/Git/TH_Nhom/New folder/frontend/src/components/ProfileForm.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport api from \"../lib/api\";\r\n\r\nexport default function ProfileForm({ initialUser, onSaved, isAdminEditing, userId, focusChangePassword = false, allowSelfChangePassword = false }) {\r\n  const [form, setForm] = useState({ name: \"\", dob: \"\", address: \"\", phone: \"\", avatarUrl: \"\", role: \"\" });\r\n  const [saving, setSaving] = useState(false);\r\n  const [showExtras, setShowExtras] = useState(false);\r\n  const [showChangePwd, setShowChangePwd] = useState(allowSelfChangePassword && !!focusChangePassword);\r\n  const [otpMsg, setOtpMsg] = useState(\"\");\r\n  const [devOtp, setDevOtp] = useState(\"\");\r\n  const [pw, setPw] = useState({ otp: \"\", newPassword: \"\", confirm: \"\" });\r\n  const [cpLoading, setCpLoading] = useState(false);\r\n  const [remaining, setRemaining] = useState(0);\r\n  const [resending, setResending] = useState(false);\r\n  const otpIntervalRef = useRef(null);\r\n  const fileRef = useRef(null);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (initialUser) {\r\n      setForm({\r\n        name: initialUser.name || \"\",\r\n        dob: initialUser.dob ? new Date(initialUser.dob).toISOString().slice(0,10) : \"\",\r\n        address: initialUser.address || \"\",\r\n        phone: initialUser.phone || \"\",\r\n        avatarUrl: initialUser.avatarUrl || \"\",\r\n        role: initialUser.role || \"user\",\r\n      });\r\n    }\r\n  }, [initialUser]);\r\n\r\n  useEffect(() => {\r\n    if (allowSelfChangePassword && focusChangePassword) setShowChangePwd(true);\r\n  }, [allowSelfChangePassword, focusChangePassword]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (otpIntervalRef.current) {\r\n        clearInterval(otpIntervalRef.current);\r\n        otpIntervalRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const change = (e) => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    try {\r\n      const payload = { name: form.name };\r\n      if (form.dob) payload.dob = form.dob;\r\n      if (showExtras) {\r\n        payload.address = form.address;\r\n        payload.phone = form.phone;\r\n        payload.avatarUrl = form.avatarUrl;\r\n      }\r\n      if (isAdminEditing && userId) {\r\n        // Only admin can change role; include if present\r\n        if (form.role) payload.role = form.role;\r\n        // Admin updates another user\r\n        await api.put(`/users/${userId}`, payload);\r\n      } else {\r\n        // Self update\r\n        await api.put(`/auth/me`, payload);\r\n      }\r\n      onSaved?.();\r\n    } catch (err) {\r\n      alert(err?.response?.data?.message || \"C·∫≠p nh·∫≠t th·∫•t b·∫°i\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const sendOtp = async () => {\r\n    setResending(true);\r\n    setOtpMsg(\"\");\r\n    setDevOtp(\"\");\r\n    try {\r\n      const res = await api.post('/auth/me/forgot-password');\r\n      setOtpMsg('ƒê√£ g·ª≠i OTP ƒë·∫øn email c·ªßa b·∫°n (hi·ªáu l·ª±c 2 ph√∫t).');\r\n      if (res?.data?.otp) setDevOtp(String(res.data.otp));\r\n      setRemaining(120);\r\n      if (otpIntervalRef.current) {\r\n        clearInterval(otpIntervalRef.current);\r\n      }\r\n      otpIntervalRef.current = setInterval(() => {\r\n        setRemaining((s) => {\r\n          if (s <= 1) {\r\n            if (otpIntervalRef.current) {\r\n              clearInterval(otpIntervalRef.current);\r\n              otpIntervalRef.current = null;\r\n            }\r\n            return 0;\r\n          }\r\n          return s - 1;\r\n        });\r\n      }, 1000);\r\n    } catch (e) {\r\n      setOtpMsg(e?.response?.data?.message || 'Kh√¥ng g·ª≠i ƒë∆∞·ª£c OTP');\r\n    } finally {\r\n      setResending(false);\r\n    }\r\n  };\r\n\r\n  const changePassword = async (e) => {\r\n    e.preventDefault();\r\n    if (!pw.newPassword || pw.newPassword.length < 6) { setOtpMsg('M·∫≠t kh·∫©u m·ªõi t·ªëi thi·ªÉu 6 k√Ω t·ª±'); return; }\r\n    if (pw.newPassword !== pw.confirm) { setOtpMsg('X√°c nh·∫≠n m·∫≠t kh·∫©u kh√¥ng kh·ªõp'); return; }\r\n    setCpLoading(true);\r\n    setOtpMsg(\"\");\r\n    try {\r\n      await api.post('/auth/me/reset-password', { otp: pw.otp, newPassword: pw.newPassword });\r\n      setOtpMsg('ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng');\r\n      setPw({ otp: \"\", newPassword: \"\", confirm: \"\" });\r\n    } catch (e) {\r\n      setOtpMsg(e?.response?.data?.message || 'ƒê·ªïi m·∫≠t kh·∫©u th·∫•t b·∫°i');\r\n    } finally {\r\n      setCpLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submit} className=\"form\">\r\n      <div className=\"field\">\r\n        <label className=\"label\">H·ªç t√™n</label>\r\n        <input className=\"input\" name=\"name\" value={form.name} onChange={change} required />\r\n      </div>\r\n      {isAdminEditing && (\r\n        <div className=\"field\">\r\n          <label className=\"label\">Ph√¢n quy·ªÅn</label>\r\n          <select className=\"input\" name=\"role\" value={form.role || 'user'} onChange={change}>\r\n            <option value=\"user\">User</option>\r\n            <option value=\"moderator\">Moderator</option>\r\n            <option value=\"admin\">Admin</option>\r\n          </select>\r\n          <div className=\"empty\" style={{ marginTop: 6, fontSize: 12, opacity: 0.8 }}>\r\n            Ch·ªâ Admin m·ªõi c√≥ quy·ªÅn ph√¢n quy·ªÅn. H·ªá th·ªëng ch·ªâ cho ph√©p duy nh·∫•t 1 t√†i kho·∫£n Admin.\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"field\">\r\n        <label className=\"label\">Ng√†y sinh</label>\r\n        <input className=\"input\" name=\"dob\" type=\"date\" value={form.dob} onChange={change} required />\r\n      </div>\r\n      <div className=\"row\">\r\n        <button className=\"button button--ghost\" type=\"button\" onClick={() => setShowExtras(s => !s)}>\r\n          {showExtras ? '·∫®n b·ªï sung' : 'B·ªï sung th√¥ng tin'}\r\n        </button>\r\n      </div>\r\n      {showExtras && (\r\n        <>\r\n          <div className=\"field\">\r\n            <label className=\"label\">·∫¢nh c√° nh√¢n</label>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, flexWrap: 'wrap' }}>\r\n              <div style={{ width: 68, height: 68, borderRadius: 8, overflow: 'hidden', background: '#1b2230', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                {form.avatarUrl ? (\r\n                  <img src={form.avatarUrl} alt=\"avatar\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                ) : (\r\n                  <span style={{ fontSize: 12, opacity: 0.7 }}>No image</span>\r\n                )}\r\n              </div>\r\n              <div style={{ display: 'flex', gap: 8, alignItems: 'center', flexWrap: 'wrap' }}>\r\n                <button type=\"button\" className=\"button\" onClick={() => fileRef.current?.click()} disabled={uploading}>\r\n                  {uploading ? 'ƒêang t·∫£i...' : 'üì§ T·∫£i ·∫£nh l√™n'}\r\n                </button>\r\n                <input ref={fileRef} type=\"file\" accept=\"image/*\" style={{ display: 'none' }} onChange={async (e) => {\r\n                  const f = e.target.files?.[0];\r\n                  if (!f) return;\r\n                  setUploading(true);\r\n                  try {\r\n                    const fd = new FormData();\r\n                    fd.append('avatar', f);\r\n                    const res = await api.post('/upload/avatar', fd, { headers: { 'Content-Type': 'multipart/form-data' } });\r\n                    const url = res?.data?.fullUrl || res?.data?.url;\r\n                    if (url) setForm(prev => ({ ...prev, avatarUrl: url }));\r\n                  } catch (err) {\r\n                    alert(err?.response?.data?.message || 'T·∫£i ·∫£nh th·∫•t b·∫°i (ch·ªâ h·ªó tr·ª£ jpeg/png/webp/gif, t·ªëi ƒëa 2MB)');\r\n                  } finally {\r\n                    setUploading(false);\r\n                    try { e.target.value = ''; } catch {}\r\n                  }\r\n                }} />\r\n                <input className=\"input\" name=\"avatarUrl\" value={form.avatarUrl} onChange={change} placeholder=\"https://...jpg\" style={{ minWidth: 260 }} />\r\n              </div>\r\n            </div>\r\n            <div className=\"empty\" style={{ marginTop: 6, fontSize: 12, opacity: 0.8 }}>B·∫°n c√≥ th·ªÉ d√°n URL ·∫£nh ho·∫∑c t·∫£i ·∫£nh t·ª´ m√°y. ·∫¢nh t·ªëi ƒëa 2MB.</div>\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">S·ªë ƒëi·ªán tho·∫°i</label>\r\n            <input className=\"input\" name=\"phone\" value={form.phone} onChange={change} placeholder=\"V√≠ d·ª•: 0901234567\" />\r\n          </div>\r\n          <div className=\"field\">\r\n            <label className=\"label\">ƒê·ªãa ch·ªâ</label>\r\n            <input className=\"input\" name=\"address\" value={form.address} onChange={change} placeholder=\"S·ªë nh√†, ƒë∆∞·ªùng, qu·∫≠n/huy·ªán, t·ªânh\" />\r\n          </div>\r\n        </>\r\n      )}\r\n      {allowSelfChangePassword && !isAdminEditing && (\r\n        <div className=\"row\" style={{ marginTop: 12 }}>\r\n          <button className=\"button button--ghost\" type=\"button\" onClick={() => setShowChangePwd(s => !s)}>\r\n            {showChangePwd ? '·∫®n ƒë·ªïi m·∫≠t kh·∫©u' : 'ƒê·ªïi m·∫≠t kh·∫©u'}\r\n          </button>\r\n        </div>\r\n      )}\r\n      {allowSelfChangePassword && !isAdminEditing && showChangePwd && (\r\n        <div className=\"card\" style={{ marginTop: 8 }}>\r\n          <div className=\"card__header\">ƒê·ªïi m·∫≠t kh·∫©u</div>\r\n          <div className=\"card__body\">\r\n            <div className=\"row\" style={{ gap: 8 }}>\r\n              <button type=\"button\" className=\"button\" onClick={sendOtp} disabled={resending}>{resending ? 'ƒêang g·ª≠i OTP...' : 'G·ª≠i OTP ƒë·∫øn email c·ªßa t√¥i'}</button>\r\n              {remaining > 0 && (\r\n                <span className=\"badge\">OTP c√≤n: {Math.floor(remaining/60)}:{String(remaining%60).padStart(2,'0')}</span>\r\n              )}\r\n            </div>\r\n            {devOtp && (\r\n              <div className=\"empty\" style={{ marginTop: 8, color: '#0a7' }}>\r\n                OTP (dev): <b>{devOtp}</b>\r\n              </div>\r\n            )}\r\n            <div className=\"form\" style={{ marginTop: 12 }}>\r\n              <div className=\"field\">\r\n                <label className=\"label\">OTP</label>\r\n                <input className=\"input\" value={pw.otp} onChange={(e) => setPw({ ...pw, otp: e.target.value })} placeholder=\"6 ch·ªØ s·ªë\" inputMode=\"numeric\" pattern=\"^\\\\d{6}$\" title=\"Nh·∫≠p 6 ch·ªØ s·ªë\" required />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">M·∫≠t kh·∫©u m·ªõi</label>\r\n                <input className=\"input\" type=\"password\" value={pw.newPassword} onChange={(e) => setPw({ ...pw, newPassword: e.target.value })} minLength={6} required />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>\r\n                <input className=\"input\" type=\"password\" value={pw.confirm} onChange={(e) => setPw({ ...pw, confirm: e.target.value })} minLength={6} required />\r\n                {pw.newPassword && pw.confirm && pw.newPassword !== pw.confirm && (\r\n                  <div className=\"empty\" style={{ color: '#c62828', marginTop: 6 }}>M·∫≠t kh·∫©u nh·∫≠p l·∫°i kh√¥ng kh·ªõp</div>\r\n                )}\r\n              </div>\r\n              <div className=\"row\">\r\n                <button className=\"button\" type=\"button\" onClick={changePassword} disabled={cpLoading}>{cpLoading ? 'ƒêang ƒë·ªïi...' : 'ƒê·ªïi m·∫≠t kh·∫©u'}</button>\r\n              </div>\r\n              {otpMsg && <div className=\"empty\" style={{ marginTop: 8 }}>{otpMsg}</div>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"row\">\r\n        <button className=\"button\" type=\"submit\" disabled={saving}>{saving ? \"ƒêang l∆∞u...\" : \"L∆∞u\"}</button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}