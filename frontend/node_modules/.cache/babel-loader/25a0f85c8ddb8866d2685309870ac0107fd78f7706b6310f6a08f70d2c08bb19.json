{"ast":null,"code":"var _jsxFileName = \"D:\\\\CNTT\\\\4\\\\HK1\\\\PTPMNM\\\\Git\\\\TH_Nhom\\\\New folder\\\\frontend\\\\src\\\\components\\\\AdminUserList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport api from \"../lib/api\";\nimport { useConfirm } from \"./ConfirmDialog\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminUserList({\n  onSelect,\n  refreshKey = 0,\n  onDeleted\n}) {\n  _s();\n  const confirm = useConfirm === null || useConfirm === void 0 ? void 0 : useConfirm();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedIds, setSelectedIds] = useState([]);\n  const [q, setQ] = useState(\"\");\n  const [searchText, setSearchText] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [limit] = useState(10);\n  const [totalPages, setTotalPages] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [autoFocusOnExact, setAutoFocusOnExact] = useState(false);\n  const allNonAdmins = useMemo(() => users.filter(u => u.role !== 'admin').map(u => u._id), [users]);\n  const exactLC = useMemo(() => (q || '').trim().toLowerCase(), [q]);\n  const itemRefs = useRef({});\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      try {\n        setLoading(true);\n        const res = await api.get('/users', {\n          params: {\n            q: q || undefined,\n            page,\n            limit\n          }\n        });\n        const payload = res.data;\n        if (!cancelled) {\n          const list = Array.isArray(payload === null || payload === void 0 ? void 0 : payload.data) ? payload.data : Array.isArray(payload) ? payload : [];\n          setUsers(list);\n          setTotalPages((payload === null || payload === void 0 ? void 0 : payload.totalPages) || 1);\n          setTotal((payload === null || payload === void 0 ? void 0 : payload.total) || list.length);\n        }\n      } catch (e) {\n        if (!cancelled) setUsers([]);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, [refreshKey, q, page, limit]);\n\n  // Note: Search is triggered only by Enter key or clicking the Tìm button to avoid fetching on every keystroke.\n\n  // Auto-select and scroll exact match into view after search triggers\n  useEffect(() => {\n    if (!autoFocusOnExact) return;\n    if (!exactLC) {\n      setAutoFocusOnExact(false);\n      return;\n    }\n    const target = users.find(u => u.name && String(u.name).toLowerCase() === exactLC || u.email && String(u.email).toLowerCase() === exactLC);\n    if (target) {\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(target);\n      const el = itemRefs.current[target._id];\n      if (el && el.scrollIntoView) {\n        el.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }\n    setAutoFocusOnExact(false);\n  }, [autoFocusOnExact, users, exactLC, onSelect]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card__body\",\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 45\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card__header\",\n      children: \"Danh s\\xE1ch t\\xE0i kho\\u1EA3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card__body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: 10,\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: searchText,\n          onChange: e => setSearchText(e.target.value),\n          onKeyDown: e => {\n            if (e.key === 'Enter') {\n              setPage(1);\n              setAutoFocusOnExact(true);\n              setQ(searchText);\n            }\n          },\n          type: \"text\",\n          className: \"input\",\n          placeholder: \"T\\xECm theo t\\xEAn ho\\u1EB7c email...\",\n          style: {\n            flex: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"button button--ghost\",\n          onClick: () => {\n            setPage(1);\n            setAutoFocusOnExact(true);\n            setQ(searchText);\n          },\n          children: \"T\\xECm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: 8,\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: allNonAdmins.length > 0 && selectedIds.length === allNonAdmins.length,\n              onChange: e => {\n                if (e.target.checked) setSelectedIds(allNonAdmins);else setSelectedIds([]);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Ch\\u1ECDn t\\u1EA5t c\\u1EA3 (kh\\xF4ng g\\u1ED3m admin)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"button button--danger\",\n            disabled: selectedIds.length === 0,\n            onClick: async () => {\n              if (selectedIds.length === 0) return;\n              const ok = await (confirm ? confirm(`Xóa ${selectedIds.length} tài khoản đã chọn? Hành động này không thể hoàn tác.`) : Promise.resolve(window.confirm(`Xóa ${selectedIds.length} tài khoản đã chọn? Hành động này không thể hoàn tác.`)));\n              if (!ok) return;\n              try {\n                const res = await api.post('/users/batch-delete', {\n                  ids: selectedIds\n                });\n                // Refresh list and inform parent\n                setSelectedIds([]);\n                onDeleted === null || onDeleted === void 0 ? void 0 : onDeleted(res.data);\n              } catch (e) {\n                var _e$response, _e$response$data;\n                alert((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Xóa thất bại');\n              }\n            },\n            children: \"X\\xF3a \\u0111\\xE3 ch\\u1ECDn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list\",\n        children: users.map(u => {\n          const isExact = !!exactLC && (u.name && String(u.name).toLowerCase() === exactLC || u.email && String(u.email).toLowerCase() === exactLC);\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            ref: el => {\n              if (el) itemRefs.current[u._id] = el;\n            },\n            className: `item${isExact ? ' item--highlight' : ''}`,\n            style: {\n              display: 'grid',\n              gridTemplateColumns: 'auto auto 1fr',\n              alignItems: 'center',\n              gap: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              disabled: u.role === 'admin',\n              checked: selectedIds.includes(u._id),\n              onChange: e => {\n                setSelectedIds(prev => {\n                  const set = new Set(prev);\n                  if (e.target.checked) set.add(u._id);else set.delete(u._id);\n                  return Array.from(set);\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: 28,\n                height: 28,\n                borderRadius: 6,\n                overflow: 'hidden',\n                background: '#1b2230',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center'\n              },\n              children: u.avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: u.avatarUrl,\n                alt: \"avatar\",\n                style: {\n                  width: '100%',\n                  height: '100%',\n                  objectFit: 'cover'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: 12,\n                  fontWeight: 700\n                },\n                children: String(u.name || u.email || '?').charAt(0).toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: () => onSelect === null || onSelect === void 0 ? void 0 : onSelect(u),\n              style: {\n                cursor: 'pointer'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 600,\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 8\n                },\n                children: [u.name, isExact && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip--accent\",\n                  children: \"tr\\xF9ng kh\\u1EDBp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"meta\",\n                children: u.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, u._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button button--ghost\",\n          disabled: page <= 1,\n          onClick: () => setPage(p => Math.max(1, p - 1)),\n          children: \"Trang tr\\u01B0\\u1EDBc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"meta\",\n          children: [\"Trang \", page, \"/\", totalPages, \" \\u2022 T\\u1ED5ng \", total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button button--ghost\",\n          disabled: page >= totalPages,\n          onClick: () => setPage(p => Math.min(totalPages, p + 1)),\n          children: \"Trang sau\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminUserList, \"tJ2Jw4Lcj0c2BwOQIYsMU6iNNGE=\");\n_c = AdminUserList;\nvar _c;\n$RefreshReg$(_c, \"AdminUserList\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","api","useConfirm","jsxDEV","_jsxDEV","AdminUserList","onSelect","refreshKey","onDeleted","_s","confirm","users","setUsers","loading","setLoading","selectedIds","setSelectedIds","q","setQ","searchText","setSearchText","page","setPage","limit","totalPages","setTotalPages","total","setTotal","autoFocusOnExact","setAutoFocusOnExact","allNonAdmins","filter","u","role","map","_id","exactLC","trim","toLowerCase","itemRefs","cancelled","res","get","params","undefined","payload","data","list","Array","isArray","length","e","target","find","name","String","email","el","current","scrollIntoView","behavior","block","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","gap","value","onChange","onKeyDown","key","type","placeholder","flex","onClick","justifyContent","alignItems","display","checked","disabled","ok","Promise","resolve","window","post","ids","_e$response","_e$response$data","alert","response","message","isExact","ref","gridTemplateColumns","includes","prev","set","Set","add","delete","from","width","height","borderRadius","overflow","background","avatarUrl","src","alt","objectFit","fontSize","fontWeight","charAt","toUpperCase","cursor","marginTop","p","Math","max","min","_c","$RefreshReg$"],"sources":["D:/CNTT/4/HK1/PTPMNM/Git/TH_Nhom/New folder/frontend/src/components/AdminUserList.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport api from \"../lib/api\";\r\nimport { useConfirm } from \"./ConfirmDialog\";\r\n\r\nexport default function AdminUserList({ onSelect, refreshKey = 0, onDeleted }) {\r\n  const confirm = useConfirm?.();\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedIds, setSelectedIds] = useState([]);\r\n  const [q, setQ] = useState(\"\");\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [limit] = useState(10);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [total, setTotal] = useState(0);\r\n  const [autoFocusOnExact, setAutoFocusOnExact] = useState(false);\r\n  const allNonAdmins = useMemo(() => users.filter(u => u.role !== 'admin').map(u => u._id), [users]);\r\n  const exactLC = useMemo(() => (q || '').trim().toLowerCase(), [q]);\r\n  const itemRefs = useRef({});\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await api.get('/users', { params: { q: q || undefined, page, limit } });\r\n        const payload = res.data;\r\n        if (!cancelled) {\r\n          const list = Array.isArray(payload?.data) ? payload.data : (Array.isArray(payload) ? payload : []);\r\n          setUsers(list);\r\n          setTotalPages(payload?.totalPages || 1);\r\n          setTotal(payload?.total || list.length);\r\n        }\r\n      } catch (e) {\r\n        if (!cancelled) setUsers([]);\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { cancelled = true; };\r\n  }, [refreshKey, q, page, limit]);\r\n\r\n  // Note: Search is triggered only by Enter key or clicking the Tìm button to avoid fetching on every keystroke.\r\n\r\n  // Auto-select and scroll exact match into view after search triggers\r\n  useEffect(() => {\r\n    if (!autoFocusOnExact) return;\r\n    if (!exactLC) { setAutoFocusOnExact(false); return; }\r\n    const target = users.find(u => (\r\n      (u.name && String(u.name).toLowerCase() === exactLC) ||\r\n      (u.email && String(u.email).toLowerCase() === exactLC)\r\n    ));\r\n    if (target) {\r\n      onSelect?.(target);\r\n      const el = itemRefs.current[target._id];\r\n      if (el && el.scrollIntoView) {\r\n        el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n      }\r\n    }\r\n    setAutoFocusOnExact(false);\r\n  }, [autoFocusOnExact, users, exactLC, onSelect]);\r\n\r\n  if (loading) return <div className=\"card\"><div className=\"card__body\">Đang tải...</div></div>;\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card__header\">Danh sách tài khoản</div>\r\n      <div className=\"card__body\">\r\n        <div className=\"row\" style={{ marginBottom: 10, gap: 8 }}>\r\n          <input\r\n            value={searchText}\r\n            onChange={(e)=> setSearchText(e.target.value)}\r\n            onKeyDown={(e) => { if (e.key === 'Enter') { setPage(1); setAutoFocusOnExact(true); setQ(searchText); } }}\r\n            type=\"text\" className=\"input\" placeholder=\"Tìm theo tên hoặc email...\"\r\n            style={{ flex: 1 }}\r\n          />\r\n          <button type=\"button\" className=\"button button--ghost\" onClick={() => { setPage(1); setAutoFocusOnExact(true); setQ(searchText); }}>Tìm</button>\r\n        </div>\r\n        <div className=\"row\" style={{ justifyContent: 'space-between', alignItems: 'center', marginBottom: 8, gap: 8 }}>\r\n          <div>\r\n            <label style={{ display: 'inline-flex', alignItems: 'center', gap: 8 }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={allNonAdmins.length > 0 && selectedIds.length === allNonAdmins.length}\r\n                onChange={(e) => {\r\n                  if (e.target.checked) setSelectedIds(allNonAdmins);\r\n                  else setSelectedIds([]);\r\n                }}\r\n              />\r\n              <span>Chọn tất cả (không gồm admin)</span>\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <button type=\"button\"\r\n              className=\"button button--danger\"\r\n              disabled={selectedIds.length === 0}\r\n              onClick={async () => {\r\n                if (selectedIds.length === 0) return;\r\n                const ok = await (confirm ? confirm(`Xóa ${selectedIds.length} tài khoản đã chọn? Hành động này không thể hoàn tác.`) : Promise.resolve(window.confirm(`Xóa ${selectedIds.length} tài khoản đã chọn? Hành động này không thể hoàn tác.`)));\r\n                if (!ok) return;\r\n                try {\r\n                  const res = await api.post('/users/batch-delete', { ids: selectedIds });\r\n                  // Refresh list and inform parent\r\n                  setSelectedIds([]);\r\n                  onDeleted?.(res.data);\r\n                } catch (e) {\r\n                  alert(e?.response?.data?.message || 'Xóa thất bại');\r\n                }\r\n              }}\r\n            >Xóa đã chọn</button>\r\n          </div>\r\n        </div>\r\n        <ul className=\"list\">\r\n          {users.map(u => {\r\n            const isExact = !!exactLC && (\r\n              (u.name && String(u.name).toLowerCase() === exactLC) ||\r\n              (u.email && String(u.email).toLowerCase() === exactLC)\r\n            );\r\n            return (\r\n            <li\r\n              key={u._id}\r\n              ref={(el) => { if (el) itemRefs.current[u._id] = el; }}\r\n              className={`item${isExact ? ' item--highlight' : ''}`}\r\n              style={{ display: 'grid', gridTemplateColumns: 'auto auto 1fr', alignItems: 'center', gap: 10 }}\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                disabled={u.role === 'admin'}\r\n                checked={selectedIds.includes(u._id)}\r\n                onChange={(e) => {\r\n                  setSelectedIds((prev) => {\r\n                    const set = new Set(prev);\r\n                    if (e.target.checked) set.add(u._id);\r\n                    else set.delete(u._id);\r\n                    return Array.from(set);\r\n                  });\r\n                }}\r\n              />\r\n              <div style={{ width: 28, height: 28, borderRadius: 6, overflow: 'hidden', background: '#1b2230', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                {u.avatarUrl ? (\r\n                  <img src={u.avatarUrl} alt=\"avatar\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                ) : (\r\n                  <span style={{ fontSize: 12, fontWeight: 700 }}>{String(u.name || u.email || '?').charAt(0).toUpperCase()}</span>\r\n                )}\r\n              </div>\r\n              <div onClick={() => onSelect?.(u)} style={{ cursor: 'pointer' }}>\r\n                <div style={{ fontWeight: 600, display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                  {u.name}\r\n                  {isExact && <span className=\"chip chip--accent\">trùng khớp</span>}\r\n                </div>\r\n                <div className=\"meta\">{u.email}</div>\r\n              </div>\r\n            </li>\r\n          );})}\r\n        </ul>\r\n        <div className=\"row\" style={{ justifyContent: 'space-between', alignItems: 'center', marginTop: 10 }}>\r\n          <button className=\"button button--ghost\" disabled={page <= 1} onClick={() => setPage(p => Math.max(1, p-1))}>Trang trước</button>\r\n          <div className=\"meta\">Trang {page}/{totalPages} • Tổng {total}</div>\r\n          <button className=\"button button--ghost\" disabled={page >= totalPages} onClick={() => setPage(p => Math.min(totalPages, p+1))}>Trang sau</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}