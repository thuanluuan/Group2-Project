{"ast":null,"code":"import _objectSpread from\"D:/New folder/Group2-Project-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import api from\"../lib/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProfileForm(_ref){let{initialUser,onSaved,isAdminEditing,userId,focusChangePassword=false,allowSelfChangePassword=false}=_ref;const[form,setForm]=useState({name:\"\",dob:\"\",address:\"\",phone:\"\",avatarUrl:\"\",role:\"\"});const[saving,setSaving]=useState(false);const[showExtras,setShowExtras]=useState(false);const[showChangePwd,setShowChangePwd]=useState(allowSelfChangePassword&&!!focusChangePassword);const[otpMsg,setOtpMsg]=useState(\"\");const[devOtp,setDevOtp]=useState(\"\");const[pw,setPw]=useState({otp:\"\",newPassword:\"\",confirm:\"\"});const[cpLoading,setCpLoading]=useState(false);const[remaining,setRemaining]=useState(0);const[resending,setResending]=useState(false);const otpIntervalRef=useRef(null);const fileRef=useRef(null);const[uploading,setUploading]=useState(false);useEffect(()=>{if(initialUser){setForm({name:initialUser.name||\"\",dob:initialUser.dob?new Date(initialUser.dob).toISOString().slice(0,10):\"\",address:initialUser.address||\"\",phone:initialUser.phone||\"\",avatarUrl:initialUser.avatarUrl||\"\",role:initialUser.role||\"user\"});}},[initialUser]);useEffect(()=>{if(allowSelfChangePassword&&focusChangePassword)setShowChangePwd(true);},[allowSelfChangePassword,focusChangePassword]);useEffect(()=>{return()=>{if(otpIntervalRef.current){clearInterval(otpIntervalRef.current);otpIntervalRef.current=null;}};},[]);const isModeratorSelf=!isAdminEditing&&(initialUser===null||initialUser===void 0?void 0:initialUser.role)==='moderator';const change=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const submit=async e=>{e.preventDefault();if(isModeratorSelf)return;// read-only for moderator\nsetSaving(true);try{const payload={name:form.name};if(form.dob)payload.dob=form.dob;if(showExtras){payload.address=form.address;payload.phone=form.phone;payload.avatarUrl=form.avatarUrl;}if(isAdminEditing&&userId){// Only admin can change role; include if present\nif(form.role)payload.role=form.role;// Admin updates another user\nawait api.put(\"/users/\".concat(userId),payload);}else{// Self update\nawait api.put(\"/auth/me\",payload);}onSaved===null||onSaved===void 0?void 0:onSaved();}catch(err){var _err$response,_err$response$data;alert((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"C·∫≠p nh·∫≠t th·∫•t b·∫°i\");}finally{setSaving(false);}};const sendOtp=async()=>{setResending(true);setOtpMsg(\"\");setDevOtp(\"\");try{var _res$data;const res=await api.post('/auth/me/forgot-password');setOtpMsg('ƒê√£ g·ª≠i OTP ƒë·∫øn email c·ªßa b·∫°n (hi·ªáu l·ª±c 2 ph√∫t).');if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.otp)setDevOtp(String(res.data.otp));setRemaining(120);if(otpIntervalRef.current){clearInterval(otpIntervalRef.current);}otpIntervalRef.current=setInterval(()=>{setRemaining(s=>{if(s<=1){if(otpIntervalRef.current){clearInterval(otpIntervalRef.current);otpIntervalRef.current=null;}return 0;}return s-1;});},1000);}catch(e){var _e$response,_e$response$data;setOtpMsg((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Kh√¥ng g·ª≠i ƒë∆∞·ª£c OTP');}finally{setResending(false);}};const changePassword=async e=>{e.preventDefault();if(!pw.newPassword||pw.newPassword.length<6){setOtpMsg('M·∫≠t kh·∫©u m·ªõi t·ªëi thi·ªÉu 6 k√Ω t·ª±');return;}if(pw.newPassword!==pw.confirm){setOtpMsg('X√°c nh·∫≠n m·∫≠t kh·∫©u kh√¥ng kh·ªõp');return;}setCpLoading(true);setOtpMsg(\"\");try{await api.post('/auth/me/reset-password',{otp:pw.otp,newPassword:pw.newPassword});setOtpMsg('ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng');setPw({otp:\"\",newPassword:\"\",confirm:\"\"});}catch(e){var _e$response2,_e$response2$data;setOtpMsg((e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:(_e$response2$data=_e$response2.data)===null||_e$response2$data===void 0?void 0:_e$response2$data.message)||'ƒê·ªïi m·∫≠t kh·∫©u th·∫•t b·∫°i');}finally{setCpLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"H\\u1ECD t\\xEAn\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"name\",value:form.name,onChange:change,required:true,disabled:isModeratorSelf})]}),isAdminEditing&&/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Ph\\xE2n quy\\u1EC1n\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"input\",name:\"role\",value:form.role||'user',onChange:change,children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moderator\",children:\"Moderator\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:6},children:/*#__PURE__*/_jsxs(\"span\",{className:\"chip \".concat(form.role==='admin'?'chip--danger':form.role==='moderator'?'chip--accent':'chip--muted'),children:[\"Quy\\u1EC1n: \",form.role||'user']})}),/*#__PURE__*/_jsx(\"div\",{className:\"empty\",style:{marginTop:6,fontSize:12,opacity:0.8},children:\"Ch\\u1EC9 Admin m\\u1EDBi c\\xF3 quy\\u1EC1n ph\\xE2n quy\\u1EC1n. H\\u1EC7 th\\u1ED1ng ch\\u1EC9 cho ph\\xE9p duy nh\\u1EA5t 1 t\\xE0i kho\\u1EA3n Admin.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Ng\\xE0y sinh\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"dob\",type:\"date\",value:form.dob,onChange:change,required:true,disabled:isModeratorSelf})]}),!isModeratorSelf&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button button--ghost\",type:\"button\",onClick:()=>setShowExtras(s=>!s),children:showExtras?'·∫®n b·ªï sung':'B·ªï sung th√¥ng tin'})}),showExtras&&!isModeratorSelf&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"\\u1EA2nh c\\xE1 nh\\xE2n\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:12,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:68,height:68,borderRadius:8,overflow:'hidden',background:'#1b2230',display:'flex',alignItems:'center',justifyContent:'center'},children:form.avatarUrl?/*#__PURE__*/_jsx(\"img\",{src:form.avatarUrl,alt:\"avatar\",style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{style:{fontSize:12,opacity:0.7},children:\"No image\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button\",onClick:()=>{var _fileRef$current;return(_fileRef$current=fileRef.current)===null||_fileRef$current===void 0?void 0:_fileRef$current.click();},disabled:uploading,children:uploading?'ƒêang t·∫£i...':'üì§ T·∫£i ·∫£nh l√™n'}),/*#__PURE__*/_jsx(\"input\",{ref:fileRef,type:\"file\",accept:\"image/*\",style:{display:'none'},onChange:async e=>{var _e$target$files;const f=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!f)return;setUploading(true);try{var _res$data2,_res$data3;const fd=new FormData();fd.append('avatar',f);const res=await api.post('/upload/avatar',fd,{headers:{'Content-Type':'multipart/form-data'}});const url=(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.fullUrl)||(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.url);if(url)setForm(prev=>_objectSpread(_objectSpread({},prev),{},{avatarUrl:url}));}catch(err){var _err$response2,_err$response2$data;alert((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'T·∫£i ·∫£nh th·∫•t b·∫°i (ch·ªâ h·ªó tr·ª£ jpeg/png/webp/gif, t·ªëi ƒëa 2MB)');}finally{setUploading(false);try{e.target.value='';}catch(_unused){}}}}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"avatarUrl\",value:form.avatarUrl,onChange:change,placeholder:\"https://...jpg\",style:{minWidth:260}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"empty\",style:{marginTop:6,fontSize:12,opacity:0.8},children:\"B\\u1EA1n c\\xF3 th\\u1EC3 d\\xE1n URL \\u1EA3nh ho\\u1EB7c t\\u1EA3i \\u1EA3nh t\\u1EEB m\\xE1y. \\u1EA2nh t\\u1ED1i \\u0111a 2MB.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"phone\",value:form.phone,onChange:change,placeholder:\"V\\xED d\\u1EE5: 0901234567\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",name:\"address\",value:form.address,onChange:change,placeholder:\"S\\u1ED1 nh\\xE0, \\u0111\\u01B0\\u1EDDng, qu\\u1EADn/huy\\u1EC7n, t\\u1EC9nh\"})]})]}),allowSelfChangePassword&&!isAdminEditing&&!isModeratorSelf&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:12},children:/*#__PURE__*/_jsx(\"button\",{className:\"button button--ghost\",type:\"button\",onClick:()=>setShowChangePwd(s=>!s),children:showChangePwd?'·∫®n ƒë·ªïi m·∫≠t kh·∫©u':'ƒê·ªïi m·∫≠t kh·∫©u'})}),allowSelfChangePassword&&!isAdminEditing&&showChangePwd&&!isModeratorSelf&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginTop:8},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card__header\",children:\"\\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{gap:8},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button\",onClick:sendOtp,disabled:resending,children:resending?'ƒêang g·ª≠i OTP...':'G·ª≠i OTP ƒë·∫øn email c·ªßa t√¥i'}),remaining>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",children:[\"OTP c\\xF2n: \",Math.floor(remaining/60),\":\",String(remaining%60).padStart(2,'0')]})]}),devOtp&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty\",style:{marginTop:8,color:'#0a7'},children:[\"OTP (dev): \",/*#__PURE__*/_jsx(\"b\",{children:devOtp})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form\",style:{marginTop:12},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"OTP\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",value:pw.otp,onChange:e=>setPw(_objectSpread(_objectSpread({},pw),{},{otp:e.target.value})),placeholder:\"6 ch\\u1EEF s\\u1ED1\",inputMode:\"numeric\",pattern:\"^\\\\\\\\d{6}$\",title:\"Nh\\u1EADp 6 ch\\u1EEF s\\u1ED1\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",value:pw.newPassword,onChange:e=>setPw(_objectSpread(_objectSpread({},pw),{},{newPassword:e.target.value})),minLength:6,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"password\",value:pw.confirm,onChange:e=>setPw(_objectSpread(_objectSpread({},pw),{},{confirm:e.target.value})),minLength:6,required:true}),pw.newPassword&&pw.confirm&&pw.newPassword!==pw.confirm&&/*#__PURE__*/_jsx(\"div\",{className:\"empty\",style:{color:'#c62828',marginTop:6},children:\"M\\u1EADt kh\\u1EA9u nh\\u1EADp l\\u1EA1i kh\\xF4ng kh\\u1EDBp\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"button\",onClick:changePassword,disabled:cpLoading,children:cpLoading?'ƒêang ƒë·ªïi...':'ƒê·ªïi m·∫≠t kh·∫©u'})}),otpMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"empty\",style:{marginTop:8},children:otpMsg})]})]})]}),!isModeratorSelf&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:saving,children:saving?\"ƒêang l∆∞u...\":\"L∆∞u\"})})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfileForm","_ref","initialUser","onSaved","isAdminEditing","userId","focusChangePassword","allowSelfChangePassword","form","setForm","name","dob","address","phone","avatarUrl","role","saving","setSaving","showExtras","setShowExtras","showChangePwd","setShowChangePwd","otpMsg","setOtpMsg","devOtp","setDevOtp","pw","setPw","otp","newPassword","confirm","cpLoading","setCpLoading","remaining","setRemaining","resending","setResending","otpIntervalRef","fileRef","uploading","setUploading","Date","toISOString","slice","current","clearInterval","isModeratorSelf","change","e","_objectSpread","target","value","submit","preventDefault","payload","put","concat","err","_err$response","_err$response$data","alert","response","data","message","sendOtp","_res$data","res","post","String","setInterval","s","_e$response","_e$response$data","changePassword","length","_e$response2","_e$response2$data","onSubmit","className","children","onChange","required","disabled","style","marginTop","fontSize","opacity","type","onClick","display","alignItems","gap","flexWrap","width","height","borderRadius","overflow","background","justifyContent","src","alt","objectFit","_fileRef$current","click","ref","accept","_e$target$files","f","files","_res$data2","_res$data3","fd","FormData","append","headers","url","fullUrl","prev","_err$response2","_err$response2$data","_unused","placeholder","minWidth","Math","floor","padStart","color","inputMode","pattern","title","minLength"],"sources":["D:/New folder/Group2-Project-main/frontend/src/components/ProfileForm.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport api from \"../lib/api\";\n\nexport default function ProfileForm({ initialUser, onSaved, isAdminEditing, userId, focusChangePassword = false, allowSelfChangePassword = false }) {\n  const [form, setForm] = useState({ name: \"\", dob: \"\", address: \"\", phone: \"\", avatarUrl: \"\", role: \"\" });\n  const [saving, setSaving] = useState(false);\n  const [showExtras, setShowExtras] = useState(false);\n  const [showChangePwd, setShowChangePwd] = useState(allowSelfChangePassword && !!focusChangePassword);\n  const [otpMsg, setOtpMsg] = useState(\"\");\n  const [devOtp, setDevOtp] = useState(\"\");\n  const [pw, setPw] = useState({ otp: \"\", newPassword: \"\", confirm: \"\" });\n  const [cpLoading, setCpLoading] = useState(false);\n  const [remaining, setRemaining] = useState(0);\n  const [resending, setResending] = useState(false);\n  const otpIntervalRef = useRef(null);\n  const fileRef = useRef(null);\n  const [uploading, setUploading] = useState(false);\n\n  useEffect(() => {\n    if (initialUser) {\n      setForm({\n        name: initialUser.name || \"\",\n        dob: initialUser.dob ? new Date(initialUser.dob).toISOString().slice(0,10) : \"\",\n        address: initialUser.address || \"\",\n        phone: initialUser.phone || \"\",\n        avatarUrl: initialUser.avatarUrl || \"\",\n        role: initialUser.role || \"user\",\n      });\n    }\n  }, [initialUser]);\n\n  useEffect(() => {\n    if (allowSelfChangePassword && focusChangePassword) setShowChangePwd(true);\n  }, [allowSelfChangePassword, focusChangePassword]);\n\n  useEffect(() => {\n    return () => {\n      if (otpIntervalRef.current) {\n        clearInterval(otpIntervalRef.current);\n        otpIntervalRef.current = null;\n      }\n    };\n  }, []);\n\n  const isModeratorSelf = !isAdminEditing && (initialUser?.role === 'moderator');\n  const change = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const submit = async (e) => {\n    e.preventDefault();\n  if (isModeratorSelf) return; // read-only for moderator\n  setSaving(true);\n    try {\n      const payload = { name: form.name };\n      if (form.dob) payload.dob = form.dob;\n      if (showExtras) {\n        payload.address = form.address;\n        payload.phone = form.phone;\n        payload.avatarUrl = form.avatarUrl;\n      }\n      if (isAdminEditing && userId) {\n        // Only admin can change role; include if present\n        if (form.role) payload.role = form.role;\n        // Admin updates another user\n        await api.put(`/users/${userId}`, payload);\n      } else {\n        // Self update\n        await api.put(`/auth/me`, payload);\n      }\n      onSaved?.();\n    } catch (err) {\n      alert(err?.response?.data?.message || \"C·∫≠p nh·∫≠t th·∫•t b·∫°i\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const sendOtp = async () => {\n    setResending(true);\n    setOtpMsg(\"\");\n    setDevOtp(\"\");\n    try {\n      const res = await api.post('/auth/me/forgot-password');\n      setOtpMsg('ƒê√£ g·ª≠i OTP ƒë·∫øn email c·ªßa b·∫°n (hi·ªáu l·ª±c 2 ph√∫t).');\n      if (res?.data?.otp) setDevOtp(String(res.data.otp));\n      setRemaining(120);\n      if (otpIntervalRef.current) {\n        clearInterval(otpIntervalRef.current);\n      }\n      otpIntervalRef.current = setInterval(() => {\n        setRemaining((s) => {\n          if (s <= 1) {\n            if (otpIntervalRef.current) {\n              clearInterval(otpIntervalRef.current);\n              otpIntervalRef.current = null;\n            }\n            return 0;\n          }\n          return s - 1;\n        });\n      }, 1000);\n    } catch (e) {\n      setOtpMsg(e?.response?.data?.message || 'Kh√¥ng g·ª≠i ƒë∆∞·ª£c OTP');\n    } finally {\n      setResending(false);\n    }\n  };\n\n  const changePassword = async (e) => {\n    e.preventDefault();\n    if (!pw.newPassword || pw.newPassword.length < 6) { setOtpMsg('M·∫≠t kh·∫©u m·ªõi t·ªëi thi·ªÉu 6 k√Ω t·ª±'); return; }\n    if (pw.newPassword !== pw.confirm) { setOtpMsg('X√°c nh·∫≠n m·∫≠t kh·∫©u kh√¥ng kh·ªõp'); return; }\n    setCpLoading(true);\n    setOtpMsg(\"\");\n    try {\n      await api.post('/auth/me/reset-password', { otp: pw.otp, newPassword: pw.newPassword });\n      setOtpMsg('ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng');\n      setPw({ otp: \"\", newPassword: \"\", confirm: \"\" });\n    } catch (e) {\n      setOtpMsg(e?.response?.data?.message || 'ƒê·ªïi m·∫≠t kh·∫©u th·∫•t b·∫°i');\n    } finally {\n      setCpLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={submit} className=\"form\">\n      <div className=\"field\">\n        <label className=\"label\">H·ªç t√™n</label>\n        <input className=\"input\" name=\"name\" value={form.name} onChange={change} required disabled={isModeratorSelf} />\n      </div>\n      {isAdminEditing && (\n        <div className=\"field\">\n          <label className=\"label\">Ph√¢n quy·ªÅn</label>\n          <select className=\"input\" name=\"role\" value={form.role || 'user'} onChange={change}>\n            <option value=\"user\">User</option>\n            <option value=\"moderator\">Moderator</option>\n            <option value=\"admin\">Admin</option>\n          </select>\n          <div className=\"row\" style={{ marginTop: 6 }}>\n            <span className={`chip ${form.role === 'admin' ? 'chip--danger' : form.role === 'moderator' ? 'chip--accent' : 'chip--muted'}`}>\n              Quy·ªÅn: {form.role || 'user'}\n            </span>\n          </div>\n          <div className=\"empty\" style={{ marginTop: 6, fontSize: 12, opacity: 0.8 }}>\n            Ch·ªâ Admin m·ªõi c√≥ quy·ªÅn ph√¢n quy·ªÅn. H·ªá th·ªëng ch·ªâ cho ph√©p duy nh·∫•t 1 t√†i kho·∫£n Admin.\n          </div>\n        </div>\n      )}\n      <div className=\"field\">\n        <label className=\"label\">Ng√†y sinh</label>\n        <input className=\"input\" name=\"dob\" type=\"date\" value={form.dob} onChange={change} required disabled={isModeratorSelf} />\n      </div>\n      {!isModeratorSelf && (\n        <div className=\"row\">\n          <button className=\"button button--ghost\" type=\"button\" onClick={() => setShowExtras(s => !s)}>\n            {showExtras ? '·∫®n b·ªï sung' : 'B·ªï sung th√¥ng tin'}\n          </button>\n        </div>\n      )}\n      {showExtras && !isModeratorSelf && (\n        <>\n          <div className=\"field\">\n            <label className=\"label\">·∫¢nh c√° nh√¢n</label>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 12, flexWrap: 'wrap' }}>\n              <div style={{ width: 68, height: 68, borderRadius: 8, overflow: 'hidden', background: '#1b2230', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                {form.avatarUrl ? (\n                  <img src={form.avatarUrl} alt=\"avatar\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n                ) : (\n                  <span style={{ fontSize: 12, opacity: 0.7 }}>No image</span>\n                )}\n              </div>\n              <div style={{ display: 'flex', gap: 8, alignItems: 'center', flexWrap: 'wrap' }}>\n                <button type=\"button\" className=\"button\" onClick={() => fileRef.current?.click()} disabled={uploading}>\n                  {uploading ? 'ƒêang t·∫£i...' : 'üì§ T·∫£i ·∫£nh l√™n'}\n                </button>\n                <input ref={fileRef} type=\"file\" accept=\"image/*\" style={{ display: 'none' }} onChange={async (e) => {\n                  const f = e.target.files?.[0];\n                  if (!f) return;\n                  setUploading(true);\n                  try {\n                    const fd = new FormData();\n                    fd.append('avatar', f);\n                    const res = await api.post('/upload/avatar', fd, { headers: { 'Content-Type': 'multipart/form-data' } });\n                    const url = res?.data?.fullUrl || res?.data?.url;\n                    if (url) setForm(prev => ({ ...prev, avatarUrl: url }));\n                  } catch (err) {\n                    alert(err?.response?.data?.message || 'T·∫£i ·∫£nh th·∫•t b·∫°i (ch·ªâ h·ªó tr·ª£ jpeg/png/webp/gif, t·ªëi ƒëa 2MB)');\n                  } finally {\n                    setUploading(false);\n                    try { e.target.value = ''; } catch {}\n                  }\n                }} />\n                <input className=\"input\" name=\"avatarUrl\" value={form.avatarUrl} onChange={change} placeholder=\"https://...jpg\" style={{ minWidth: 260 }} />\n              </div>\n            </div>\n            <div className=\"empty\" style={{ marginTop: 6, fontSize: 12, opacity: 0.8 }}>B·∫°n c√≥ th·ªÉ d√°n URL ·∫£nh ho·∫∑c t·∫£i ·∫£nh t·ª´ m√°y. ·∫¢nh t·ªëi ƒëa 2MB.</div>\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">S·ªë ƒëi·ªán tho·∫°i</label>\n            <input className=\"input\" name=\"phone\" value={form.phone} onChange={change} placeholder=\"V√≠ d·ª•: 0901234567\" />\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">ƒê·ªãa ch·ªâ</label>\n            <input className=\"input\" name=\"address\" value={form.address} onChange={change} placeholder=\"S·ªë nh√†, ƒë∆∞·ªùng, qu·∫≠n/huy·ªán, t·ªânh\" />\n          </div>\n        </>\n      )}\n      {allowSelfChangePassword && !isAdminEditing && !isModeratorSelf && (\n        <div className=\"row\" style={{ marginTop: 12 }}>\n          <button className=\"button button--ghost\" type=\"button\" onClick={() => setShowChangePwd(s => !s)}>\n            {showChangePwd ? '·∫®n ƒë·ªïi m·∫≠t kh·∫©u' : 'ƒê·ªïi m·∫≠t kh·∫©u'}\n          </button>\n        </div>\n      )}\n      {allowSelfChangePassword && !isAdminEditing && showChangePwd && !isModeratorSelf && (\n        <div className=\"card\" style={{ marginTop: 8 }}>\n          <div className=\"card__header\">ƒê·ªïi m·∫≠t kh·∫©u</div>\n          <div className=\"card__body\">\n            <div className=\"row\" style={{ gap: 8 }}>\n              <button type=\"button\" className=\"button\" onClick={sendOtp} disabled={resending}>{resending ? 'ƒêang g·ª≠i OTP...' : 'G·ª≠i OTP ƒë·∫øn email c·ªßa t√¥i'}</button>\n              {remaining > 0 && (\n                <span className=\"badge\">OTP c√≤n: {Math.floor(remaining/60)}:{String(remaining%60).padStart(2,'0')}</span>\n              )}\n            </div>\n            {devOtp && (\n              <div className=\"empty\" style={{ marginTop: 8, color: '#0a7' }}>\n                OTP (dev): <b>{devOtp}</b>\n              </div>\n            )}\n            <div className=\"form\" style={{ marginTop: 12 }}>\n              <div className=\"field\">\n                <label className=\"label\">OTP</label>\n                <input className=\"input\" value={pw.otp} onChange={(e) => setPw({ ...pw, otp: e.target.value })} placeholder=\"6 ch·ªØ s·ªë\" inputMode=\"numeric\" pattern=\"^\\\\d{6}$\" title=\"Nh·∫≠p 6 ch·ªØ s·ªë\" required />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">M·∫≠t kh·∫©u m·ªõi</label>\n                <input className=\"input\" type=\"password\" value={pw.newPassword} onChange={(e) => setPw({ ...pw, newPassword: e.target.value })} minLength={6} required />\n              </div>\n              <div className=\"field\">\n                <label className=\"label\">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>\n                <input className=\"input\" type=\"password\" value={pw.confirm} onChange={(e) => setPw({ ...pw, confirm: e.target.value })} minLength={6} required />\n                {pw.newPassword && pw.confirm && pw.newPassword !== pw.confirm && (\n                  <div className=\"empty\" style={{ color: '#c62828', marginTop: 6 }}>M·∫≠t kh·∫©u nh·∫≠p l·∫°i kh√¥ng kh·ªõp</div>\n                )}\n              </div>\n              <div className=\"row\">\n                <button className=\"button\" type=\"button\" onClick={changePassword} disabled={cpLoading}>{cpLoading ? 'ƒêang ƒë·ªïi...' : 'ƒê·ªïi m·∫≠t kh·∫©u'}</button>\n              </div>\n              {otpMsg && <div className=\"empty\" style={{ marginTop: 8 }}>{otpMsg}</div>}\n            </div>\n          </div>\n        </div>\n      )}\n      {!isModeratorSelf && (\n        <div className=\"row\">\n          <button className=\"button\" type=\"submit\" disabled={saving}>{saving ? \"ƒêang l∆∞u...\" : \"L∆∞u\"}</button>\n        </div>\n      )}\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}